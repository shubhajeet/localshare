########################################################################################
#
#	@file: getfile
#	@author: shubhajeet
#	@licence: GPL V2
#	@about: This file grabs the hosted file
#
#######################################################################################

#!/bin/bash

#####################
#
# function getfile
# @uses: getfile ipaddress port_no
# @return:	 0 sucessful completion
#		
#
#####################

getfile()
{
    echo "Trying to get file hosted in $1"
    sudo nc $1 $2 | pv > tmp.tar
    if [ $(tar -xf tmp.tar) ]
    then
	echo "files fetched"
	return 0
    fi
    rm tmp.tar
}
# checking the number of argument
if [ $# == 3 ]
then
	getfile $@
else
	echo "Uses: getfile ip_address port_no"
fi
